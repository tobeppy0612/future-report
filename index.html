<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>imakara LIFF</title>
</head>
<body>
  <main style="padding:16px;font-family:sans-serif">
    <h1>imakara</h1>
    <p>Typeformに遷移します…</p>
  </main>

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    const LIFF_ID = "2008216335-7GaOQbLn"; //
    const TYPEFORM_URL = "https://form.typeform.com/to/p5iN6F6W#line_user_id=xxxxx"; // 

    (async () => {
      await liff.init({ liffId: LIFF_ID });
      if (!liff.isLoggedIn()) return liff.login();

      const profile = await liff.getProfile(); // { userId, displayName, ... }
      const url = TYPEFORM_URL + "?line_user_id=" + encodeURIComponent(profile.userId);

      //
      liff.openWindow({ url, external: false });;
    })();
  </script>
</body>
</html>
