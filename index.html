<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>imakara LIFF</title>
</head>
<body>
  <main style="padding:16px;font-family:sans-serif">
    <h1>imakara</h1>
    <p>Typeformに遷移します…</p>
  </main>

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    const LIFF_ID = "YOUR_LIFF_ID"; // ← 手順2で控えた値
    const TYPEFORM_URL = "https://form.typeform.com/to/ABC123"; // ← あなたのフォームURL

    (async () => {
      await liff.init({ liffId: LIFF_ID });
      if (!liff.isLoggedIn()) return liff.login();

      const profile = await liff.getProfile(); // { userId, displayName, ... }
      const url = TYPEFORM_URL + "?line_user_id=" + encodeURIComponent(profile.userId);

      // LINE内 or 外部ブラウザ、どちらでもOK
      liff.openWindow({ url, external: true });
    })();
  </script>
</body>
</html>
